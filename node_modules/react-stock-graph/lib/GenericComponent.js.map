{"version":3,"sources":["../../src/lib/GenericComponent.js"],"names":["getAxisCanvas","getMouseCanvas","aliases","mouseleave","panend","pinchzoom","mousedown","click","contextmenu","dblclick","dragstart","dragend","dragcancel","GenericComponent","props","context","drawOnCanvas","bind","getMoreProps","listener","draw","updateMoreProps","evaluateType","isHover","preCanvasDraw","postCanvasDraw","getPanConditions","shouldTypeProceed","preEvaluate","generateSubscriptionId","suscriberId","moreProps","state","updateCount","Object","keys","forEach","key","type","e","evaluationInProgress","newType","proceed","drawOn","indexOf","hovering","onUnHover","onContextMenu","onContextMenuWhenHover","onMouseDown","onClickWhenHover","onClickOutside","onClick","prevHover","amIOnTop","setCursorClass","selected","onHover","iSetTheCursorClass","interactiveCursorClass","onMouseMove","onDoubleClick","onDoubleClickWhenHover","onPan","onPanEnd","draggable","dragInProgress","onDragStart","someDragInProgress","onDrag","onDragComplete","enableDragOnHover","panEnabled","disablePan","force","trigger","chartCanvasType","canvasDraw","setState","subscribe","chartId","clip","edgeClip","componentWillReceiveProps","unsubscribe","componentDidUpdate","prevProps","nextProps","nextContext","xScale","plotData","chartConfig","getMutableState","debug","morePropsDecorator","xAccessor","displayXAccessor","width","height","fullData","identity","canvasToDraw","getCanvasContexts","ctx","svgDraw","suffix","style","Component","propTypes","PropTypes","func","isRequired","array","bool","string","defaultProps","contexts","mouseCoord","noop","contextTypes","number","margin","object","oneOfType","axes"],"mappings":"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","file":"GenericComponent.js","sourcesContent":["\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport {\n\tisNotDefined,\n\tisDefined,\n\tnoop,\n\tfunctor,\n\tidentity,\n} from \"./utils\";\n\nconst aliases = {\n\tmouseleave: \"mousemove\", // to draw interactive after mouse exit\n\tpanend: \"pan\",\n\tpinchzoom: \"pan\",\n\tmousedown: \"mousemove\",\n\tclick: \"mousemove\",\n\tcontextmenu: \"mousemove\",\n\tdblclick: \"mousemove\",\n\tdragstart: \"drag\",\n\tdragend: \"drag\",\n\tdragcancel: \"drag\",\n};\n\nclass GenericComponent extends Component {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t\tthis.getMoreProps = this.getMoreProps.bind(this);\n\t\tthis.listener = this.listener.bind(this);\n\t\tthis.draw = this.draw.bind(this);\n\t\tthis.updateMoreProps = this.updateMoreProps.bind(this);\n\t\tthis.evaluateType = this.evaluateType.bind(this);\n\t\tthis.isHover = this.isHover.bind(this);\n\t\tthis.preCanvasDraw = this.preCanvasDraw.bind(this);\n\t\tthis.postCanvasDraw = this.postCanvasDraw.bind(this);\n\t\tthis.getPanConditions = this.getPanConditions.bind(this);\n\t\tthis.shouldTypeProceed = this.shouldTypeProceed.bind(this);\n\t\tthis.preEvaluate = this.preEvaluate.bind(this);\n\n\t\tconst { generateSubscriptionId } = context;\n\t\tthis.suscriberId = generateSubscriptionId();\n\n\t\tthis.moreProps = {};\n\n\t\tthis.state = {\n\t\t\tupdateCount: 0,\n\t\t};\n\t}\n\tupdateMoreProps(moreProps) {\n\t\tObject.keys(moreProps).forEach(key => {\n\t\t\tthis.moreProps[key] = moreProps[key];\n\t\t});\n\t}\n\tshouldTypeProceed() {\n\t\treturn true;\n\t}\n\tpreEvaluate() {\n\t}\n\tlistener(type, moreProps, state, e) {\n\t\t// console.log(e.shiftKey)\n\t\tif (isDefined(moreProps)) {\n\t\t\tthis.updateMoreProps(moreProps);\n\t\t}\n\t\tthis.evaluationInProgress = true;\n\t\tthis.evaluateType(type, e);\n\t\tthis.evaluationInProgress = false;\n\t}\n\tevaluateType(type, e) {\n\t\tconst newType = aliases[type] || type;\n\t\tconst proceed = this.props.drawOn.indexOf(newType) > -1;\n\n\t\t// console.log(\"type ->\", type, proceed);\n\n\t\tif (!proceed) return;\n\t\t// const moreProps = this.getMoreProps();\n\t\tthis.preEvaluate(type, this.moreProps, e);\n\t\tif (!this.shouldTypeProceed(type, this.moreProps)) return;\n\n\t\tswitch (type) {\n\t\t\tcase \"zoom\":\n\t\t\tcase \"mouseenter\":\n\t\t\t// DO NOT DRAW FOR THESE EVENTS\n\t\t\t\tbreak;\n\t\t\tcase \"mouseleave\": {\n\t\t\t\tthis.moreProps.hovering = false;\n\t\t\t\tconst moreProps = this.getMoreProps();\n\n\t\t\t\tif (this.props.onUnHover) {\n\t\t\t\t\tthis.props.onUnHover(moreProps, e);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"contextmenu\": {\n\t\t\t\tif (this.props.onContextMenu) {\n\t\t\t\t\tthis.props.onContextMenu(this.getMoreProps(), e);\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tthis.moreProps.hovering\n\t\t\t\t&& this.props.onContextMenuWhenHover\n\t\t\t\t) {\n\t\t\t\t\tthis.props.onContextMenuWhenHover(this.getMoreProps(), e);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"mousedown\": {\n\t\t\t\tif (this.props.onMouseDown) {\n\t\t\t\t\tthis.props.onMouseDown(this.getMoreProps(), e);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"click\": {\n\t\t\t\tconst moreProps = this.getMoreProps();\n\t\t\t\tif (this.moreProps.hovering) {\n\t\t\t\t// console.error(\"TODO use this only for SAR, Line series\")\n\t\t\t\t\tthis.props.onClickWhenHover(moreProps, e);\n\t\t\t\t} else {\n\t\t\t\t\tthis.props.onClickOutside(moreProps, e);\n\t\t\t\t}\n\t\t\t\tif (this.props.onClick) {\n\t\t\t\t\tthis.props.onClick(moreProps, e);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"mousemove\": {\n\n\t\t\t\tconst prevHover = this.moreProps.hovering;\n\t\t\t\tthis.moreProps.hovering = this.isHover(e);\n\n\t\t\t\tconst { amIOnTop, setCursorClass } = this.context;\n\n\t\t\t\tif (this.moreProps.hovering\n\t\t\t\t\t&& !this.props.selected\n\t\t\t\t\t/* && !prevHover */\n\t\t\t\t\t&& amIOnTop(this.suscriberId)\n\t\t\t\t\t&& isDefined(this.props.onHover)) {\n\t\t\t\t\tsetCursorClass(\"react-stockcharts-pointer-cursor\");\n\t\t\t\t\tthis.iSetTheCursorClass = true;\n\t\t\t\t} else if (this.moreProps.hovering\n\t\t\t\t\t&& this.props.selected\n\t\t\t\t\t&& amIOnTop(this.suscriberId)) {\n\t\t\t\t\tsetCursorClass(this.props.interactiveCursorClass);\n\t\t\t\t\tthis.iSetTheCursorClass = true;\n\t\t\t\t} else if (prevHover\n\t\t\t\t\t&& !this.moreProps.hovering\n\t\t\t\t\t&& this.iSetTheCursorClass) {\n\t\t\t\t\tthis.iSetTheCursorClass = false;\n\t\t\t\t\tsetCursorClass(null);\n\t\t\t\t}\n\t\t\t\tconst moreProps = this.getMoreProps();\n\n\t\t\t\tif (this.moreProps.hovering && !prevHover) {\n\t\t\t\t\tif (this.props.onHover) {\n\t\t\t\t\t\tthis.props.onHover(moreProps, e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (prevHover && !this.moreProps.hovering) {\n\t\t\t\t\tif (this.props.onUnHover) {\n\t\t\t\t\t\tthis.props.onUnHover(moreProps, e);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.props.onMouseMove) {\n\t\t\t\t\tthis.props.onMouseMove(moreProps, e);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"dblclick\": {\n\t\t\t\tconst moreProps = this.getMoreProps();\n\n\t\t\t\tif (this.props.onDoubleClick) {\n\t\t\t\t\tthis.props.onDoubleClick(moreProps, e);\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tthis.moreProps.hovering\n\t\t\t\t&& this.props.onDoubleClickWhenHover\n\t\t\t\t) {\n\t\t\t\t\tthis.props.onDoubleClickWhenHover(moreProps, e);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"pan\": {\n\t\t\t\tthis.moreProps.hovering = false;\n\t\t\t\tif (this.props.onPan) {\n\t\t\t\t\tthis.props.onPan(this.getMoreProps(), e);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"panend\": {\n\t\t\t\tif (this.props.onPanEnd) {\n\t\t\t\t\tthis.props.onPanEnd(this.getMoreProps(), e);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"dragstart\": {\n\t\t\t\tif (this.getPanConditions().draggable) {\n\t\t\t\t\tconst { amIOnTop } = this.context;\n\t\t\t\t\tif (amIOnTop(this.suscriberId)) {\n\t\t\t\t\t\tthis.dragInProgress = true;\n\t\t\t\t\t\tthis.props.onDragStart(this.getMoreProps(), e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.someDragInProgress = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"drag\": {\n\t\t\t\tif (this.dragInProgress && this.props.onDrag) {\n\t\t\t\t\tthis.props.onDrag(this.getMoreProps(), e);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"dragend\": {\n\t\t\t\tif (this.dragInProgress && this.props.onDragComplete) {\n\t\t\t\t\tthis.props.onDragComplete(this.getMoreProps(), e);\n\t\t\t\t}\n\t\t\t\tthis.dragInProgress = false;\n\t\t\t\tthis.someDragInProgress = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"dragcancel\": {\n\t\t\t\tif (this.dragInProgress || this.iSetTheCursorClass) {\n\t\t\t\t\tconst { setCursorClass } = this.context;\n\t\t\t\t\tsetCursorClass(null);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tisHover(e) {\n\t\treturn isDefined(this.props.isHover)\n\t\t\t? this.props.isHover(this.getMoreProps(), e)\n\t\t\t: false;\n\t}\n\tgetPanConditions() {\n\t\tconst draggable = (\n\t\t\t!!(this.props.selected && this.moreProps.hovering)\n\t\t\t|| (this.props.enableDragOnHover && this.moreProps.hovering)\n\t\t);\n\n\t\treturn {\n\t\t\tdraggable,\n\t\t\tpanEnabled: !this.props.disablePan,\n\t\t};\n\t}\n\tdraw({ trigger, force } = { force: false }) {\n\t\tconst type = aliases[trigger] || trigger;\n\t\tconst proceed = this.props.drawOn.indexOf(type) > -1;\n\n\t\tif (proceed\n\t\t\t|| this.props.selected /* this is to draw as soon as you select */\n\t\t\t|| force\n\t\t) {\n\t\t\tconst { chartCanvasType } = this.context;\n\t\t\tconst { canvasDraw } = this.props;\n\n\t\t\tif (isNotDefined(canvasDraw) || chartCanvasType === \"svg\") {\n\t\t\t\tconst { updateCount } = this.state;\n\t\t\t\tthis.setState({\n\t\t\t\t\tupdateCount: updateCount + 1,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.drawOnCanvas();\n\t\t\t}\n\t\t}\n\t}\n\tcomponentWillMount() {\n\t\tconst { subscribe, chartId } = this.context;\n\t\tconst { clip, edgeClip } = this.props;\n\n\t\tsubscribe(this.suscriberId,\n\t\t\t{\n\t\t\t\tchartId, clip, edgeClip,\n\t\t\t\tlistener: this.listener,\n\t\t\t\tdraw: this.draw,\n\t\t\t\tgetPanConditions: this.getPanConditions,\n\t\t\t}\n\t\t);\n\t\tthis.componentWillReceiveProps(this.props, this.context);\n\t}\n\tcomponentWillUnmount() {\n\t\tconst { unsubscribe } = this.context;\n\t\tunsubscribe(this.suscriberId);\n\t\tif (this.iSetTheCursorClass) {\n\t\t\tconst { setCursorClass } = this.context;\n\t\t\tsetCursorClass(null);\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\tthis.componentDidUpdate(this.props);\n\t}\n\tcomponentDidUpdate(prevProps) {\n\t\tconst { chartCanvasType } = this.context;\n\t\tconst { canvasDraw, selected, interactiveCursorClass } = this.props;\n\n\t\tif (prevProps.selected !== selected) {\n\t\t\tconst { setCursorClass } = this.context;\n\t\t\tif (selected && this.moreProps.hovering) {\n\t\t\t\tthis.iSetTheCursorClass = true;\n\t\t\t\tsetCursorClass(interactiveCursorClass);\n\t\t\t} else {\n\t\t\t\tthis.iSetTheCursorClass = false;\n\t\t\t\tsetCursorClass(null);\n\t\t\t}\n\t\t}\n\t\tif (isDefined(canvasDraw)\n\t\t\t\t&& !this.evaluationInProgress\n\t\t\t\t// && !(this.someDragInProgress && this.props.selected)\n\t\t\t\t/*\n\t\t\t\tprevent double draw of interactive elements\n\t\t\t\tduring dragging / hover / click etc.\n\t\t\t\t*/\n\t\t\t\t&& chartCanvasType !== \"svg\") {\n\n\t\t\tthis.updateMoreProps(this.moreProps);\n\t\t\tthis.drawOnCanvas();\n\t\t}\n\t}\n\tcomponentWillReceiveProps(nextProps, nextContext) {\n\t\tconst { xScale, plotData, chartConfig, getMutableState } = nextContext;\n\n\t\tthis.props.debug(nextContext);\n\t\tthis.moreProps = {\n\t\t\t...this.moreProps,\n\t\t\t...getMutableState(),\n\t\t\t/*\n\t\t\t^ this is so\n\t\t\tmouseXY, currentCharts, currentItem are available to\n\t\t\tnewly created components like MouseHoverText which\n\t\t\tis created right after a new interactive object is drawn\n\t\t\t*/\n\t\t\txScale, plotData, chartConfig\n\t\t};\n\t}\n\tgetMoreProps() {\n\t\tconst {\n\t\t\txScale,\n\t\t\tplotData,\n\t\t\tchartConfig,\n\t\t\tmorePropsDecorator,\n\t\t\txAccessor,\n\t\t\tdisplayXAccessor,\n\t\t\twidth,\n\t\t\theight,\n\t\t} = this.context;\n\n\t\tconst { chartId, fullData } = this.context;\n\n\t\tconst moreProps = {\n\t\t\txScale, plotData, chartConfig,\n\t\t\txAccessor, displayXAccessor,\n\t\t\twidth, height,\n\t\t\tchartId,\n\t\t\tfullData,\n\t\t\t...this.moreProps,\n\t\t};\n\n\t\treturn (morePropsDecorator || identity)(moreProps);\n\t}\n\tpreCanvasDraw() {\n\t\t// do nothing\n\t}\n\tpostCanvasDraw() {\n\t}\n\tdrawOnCanvas() {\n\t\tconst { canvasDraw, canvasToDraw } = this.props;\n\t\tconst { getCanvasContexts } = this.context;\n\n\t\tconst moreProps = this.getMoreProps();\n\n\t\tconst ctx = canvasToDraw(getCanvasContexts());\n\n\t\tthis.preCanvasDraw(ctx, moreProps);\n\t\tcanvasDraw(ctx, moreProps);\n\t\tthis.postCanvasDraw(ctx, moreProps);\n\t}\n\trender() {\n\t\tconst { chartCanvasType, chartId } = this.context;\n\t\tconst { canvasDraw, clip, svgDraw } = this.props;\n\n\t\tif (isDefined(canvasDraw) && chartCanvasType !== \"svg\") {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst suffix = isDefined(chartId) ? \"-\" + chartId : \"\";\n\n\t\tconst style = clip ? { \"clipPath\": `url(#chart-area-clip${suffix})` } : null;\n\n\t\treturn <g style={style}>{svgDraw(this.getMoreProps())}</g>;\n\t}\n}\n\nGenericComponent.propTypes = {\n\tsvgDraw: PropTypes.func.isRequired,\n\tcanvasDraw: PropTypes.func,\n\n\tdrawOn: PropTypes.array.isRequired,\n\n\tclip: PropTypes.bool.isRequired,\n\tedgeClip: PropTypes.bool.isRequired,\n\tinteractiveCursorClass: PropTypes.string,\n\n\tselected: PropTypes.bool.isRequired,\n\tenableDragOnHover: PropTypes.bool.isRequired,\n\tdisablePan: PropTypes.bool.isRequired,\n\n\tcanvasToDraw: PropTypes.func.isRequired,\n\n\tisHover: PropTypes.func,\n\n\tonClick: PropTypes.func,\n\tonClickWhenHover: PropTypes.func,\n\tonClickOutside: PropTypes.func,\n\n\tonPan: PropTypes.func,\n\tonPanEnd: PropTypes.func,\n\tonDragStart: PropTypes.func,\n\tonDrag: PropTypes.func,\n\tonDragComplete: PropTypes.func,\n\tonDoubleClick: PropTypes.func,\n\tonDoubleClickWhenHover: PropTypes.func,\n\tonContextMenu: PropTypes.func,\n\tonContextMenuWhenHover: PropTypes.func,\n\tonMouseMove: PropTypes.func,\n\tonMouseDown: PropTypes.func,\n\tonHover: PropTypes.func,\n\tonUnHover: PropTypes.func,\n\n\tdebug: PropTypes.func,\n\t// owner: PropTypes.string.isRequired,\n};\n\nGenericComponent.defaultProps = {\n\tsvgDraw: functor(null),\n\tdraw: [],\n\tcanvasToDraw: contexts => contexts.mouseCoord,\n\tclip: true,\n\tedgeClip: false,\n\tselected: false,\n\tdisablePan: false,\n\tenableDragOnHover: false,\n\n\tonClickWhenHover: noop,\n\tonClickOutside: noop,\n\tonDragStart: noop,\n\tonMouseMove: noop,\n\tonMouseDown: noop,\n\tdebug: noop,\n};\n\nGenericComponent.contextTypes = {\n\twidth: PropTypes.number.isRequired,\n\theight: PropTypes.number.isRequired,\n\tmargin: PropTypes.object.isRequired,\n\tchartId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\tgetCanvasContexts: PropTypes.func,\n\n\tchartCanvasType: PropTypes.string,\n\txScale: PropTypes.func.isRequired,\n\txAccessor: PropTypes.func.isRequired,\n\tdisplayXAccessor: PropTypes.func.isRequired,\n\tplotData: PropTypes.array.isRequired,\n\tfullData: PropTypes.array.isRequired,\n\n\tchartConfig: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.object,\n\t]).isRequired,\n\n\tmorePropsDecorator: PropTypes.func,\n\tgenerateSubscriptionId: PropTypes.func,\n\tgetMutableState: PropTypes.func.isRequired,\n\n\tamIOnTop: PropTypes.func.isRequired,\n\tsubscribe: PropTypes.func.isRequired,\n\tunsubscribe: PropTypes.func.isRequired,\n\tsetCursorClass: PropTypes.func.isRequired,\n};\n\nexport default GenericComponent;\n\nexport function getAxisCanvas(contexts) {\n\treturn contexts.axes;\n}\n\nexport function getMouseCanvas(contexts) {\n\treturn contexts.mouseCoord;\n}\n"]}