{"version":3,"sources":["../../../../src/lib/interactive/components/HoverTextNearMouse.js"],"names":["PADDING","HoverTextNearMouse","props","renderSVG","bind","drawOnCanvas","ctx","moreProps","fontFamily","fontSize","fill","bgFill","bgOpacity","textMetaData","helper","rect","text","strokeStyle","fillStyle","beginPath","x","y","width","height","stroke","font","fillText","getMouseCanvas","Component","propTypes","PropTypes","string","isRequired","number","bgWidth","bgHeight","show","bool","defaultProps","mouseXY","chartConfig","mouseInsideCanvas","cx","cy"],"mappings":"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","file":"HoverTextNearMouse.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport GenericChartComponent from \"../../GenericChartComponent\";\nimport { getMouseCanvas } from \"../../GenericComponent\";\nimport { isDefined, hexToRGBA } from \"../../utils\";\n\nconst PADDING = 10;\n\nclass HoverTextNearMouse extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst {\n\t\t\tfontFamily,\n\t\t\tfontSize,\n\t\t\tfill,\n\t\t\tbgFill,\n\t\t\tbgOpacity,\n\t\t} = this.props;\n\n\t\t// console.log(moreProps)\n\t\tconst textMetaData = helper(this.props, moreProps);\n\n\t\tif (isDefined(textMetaData)) {\n\t\t\tconst { rect, text } = textMetaData;\n\n\t\t\tctx.strokeStyle = bgFill;\n\t\t\tctx.fillStyle = hexToRGBA(bgFill, bgOpacity);\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(rect.x, rect.y, rect.width, rect.height);\n\t\t\tctx.fill();\n\t\t\tctx.stroke();\n\n\t\t\tctx.font = `${ fontSize }px ${fontFamily}`;\n\t\t\tctx.fillStyle = fill;\n\t\t\tctx.beginPath();\n\n\t\t\tctx.fillText(text.text, text.x, text.y);\n\t\t}\n\t}\n\trenderSVG(moreProps) {\n\t\tconst {\n\t\t\tfontFamily,\n\t\t\tfontSize,\n\t\t\tfill,\n\t\t\tbgFill,\n\t\t\tbgOpacity,\n\t\t} = this.props;\n\n\t\t// console.log(moreProps)\n\t\tconst textMetaData = helper(this.props, moreProps);\n\n\t\tif (isDefined(textMetaData)) {\n\t\t\tconst { rect, text } = textMetaData;\n\n\t\t\treturn (\n\t\t\t\t<g>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tfill={bgFill}\n\t\t\t\t\t\tfillOpacity={bgOpacity}\n\t\t\t\t\t\tstroke={bgFill}\n\t\t\t\t\t\t{...rect}\n\t\t\t\t\t/>\n\t\t\t\t\t<text\n\t\t\t\t\t\tfontSize={fontSize}\n\t\t\t\t\t\tfontFamily={fontFamily}\n\t\t\t\t\t\ttextAnchor=\"start\"\n\t\t\t\t\t\tfill={fill}\n\t\t\t\t\t\tx={text.x}\n\t\t\t\t\t\ty={text.y}>{text.text}</text>\n\t\t\t\t</g>\n\t\t\t);\n\t\t}\n\t}\n\trender() {\n\n\t\treturn <GenericChartComponent foo\n\n\t\t\tsvgDraw={this.renderSVG}\n\n\t\t\tcanvasToDraw={getMouseCanvas}\n\t\t\tcanvasDraw={this.drawOnCanvas}\n\n\t\t\tdrawOn={[\"mousemove\"]}\n\t\t/>;\n\t}\n}\n\nHoverTextNearMouse.propTypes = {\n\tfontFamily: PropTypes.string.isRequired,\n\tfontSize: PropTypes.number.isRequired,\n\tfill: PropTypes.string.isRequired,\n\ttext: PropTypes.string.isRequired,\n\tbgFill: PropTypes.string.isRequired,\n\tbgOpacity: PropTypes.number.isRequired,\n\tbgWidth: PropTypes.number.isRequired,\n\tbgHeight: PropTypes.number.isRequired,\n\tshow: PropTypes.bool.isRequired,\n};\n\nHoverTextNearMouse.defaultProps = {\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n\tfontSize: 12,\n\tfill: \"#000000\",\n\tbgFill: \"#FA9325\",\n\tbgOpacity: 0.5,\n};\n\nfunction helper(props, moreProps) {\n\tconst {\n\t\tshow,\n\t\tfontSize,\n\t\tbgWidth,\n\t\tbgHeight,\n\t} = props;\n\n\tconst {\n\t\tmouseXY,\n\t\tchartConfig: { height, width },\n\t\tshow: mouseInsideCanvas\n\t} = moreProps;\n\n\tif (show && mouseInsideCanvas) {\n\t\tconst [x, y] = mouseXY;\n\n\t\tconst cx = x < width / 2\n\t\t\t? x + PADDING\n\t\t\t: x - bgWidth - PADDING;\n\t\tconst cy = y < height / 2\n\t\t\t? y + PADDING\n\t\t\t: y - bgHeight - PADDING;\n\n\t\tconst rect = {\n\t\t\tx: cx,\n\t\t\ty: cy,\n\t\t\twidth: bgWidth,\n\t\t\theight: bgHeight,\n\t\t};\n\t\tconst text = {\n\t\t\ttext: props.text,\n\t\t\tx: cx + PADDING / 2,\n\t\t\ty: cy + fontSize\n\t\t};\n\n\t\treturn {\n\t\t\trect,\n\t\t\ttext\n\t\t};\n\t}\n}\n\nexport default HoverTextNearMouse;\n"]}